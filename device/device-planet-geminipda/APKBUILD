# Reference: <https://postmarketos.org/devicepkg>
pkgname="device-planet-geminipda"
pkgdesc="Gemini PDA"
pkgver=0.1
pkgrel=0
url="https://postmarketos.org"
license="MIT"
arch="noarch"
options="!check"
depends="postmarketos-base linux-planet-geminipda mkbootimg"
makedepends="devicepkg-dev"
source="deviceinfo
	10-geminipda-loopback-device.sh
	40-hwcomposer.conf"
subpackages="$pkgname-hybris"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	devicepkg_package $startdir $pkgname

	install -Dm644 "$srcdir"/10-geminipda-loopback-device.sh \
		"$pkgdir"/etc/postmarketos-mkinitfs/hooks/10-geminipda-loopback-device.sh
}

hybris() {
	depends="halium-image-planet-geminipda lxc-android
		libhybris libhybris-egl libhybris-gles libhybris-libwayland-egl
		xf86-video-hwcomposer xf86-video-hwcomposer-7.1"

	install -Dm644 "$srcdir"/40-hwcomposer.conf \
		"$subpkgdir"/etc/X11/xorg.conf.d/40-hwcomposer.conf
}

sha512sums="1cd0ea93098186d4fb5c8edfb52892021a9915aa3a30021fa526089ed3b2eeb0cfc29cb64f90ebd569e10b4b75fbef771084a982eed852036c1eb31828276ab4  deviceinfo
a8b6623a0a8bea1ab3e28582f203426e42aed477be9ca1d6147d090f9f9d080a69c262a47f9dd5cd8ce99a9bf64912d902dc881f97967873466ebe73d9bba587  10-geminipda-loopback-device.sh
9ad285a9e4c7b80d59dcb56d6d52ef3e54933fb2f5bfdb789a8b0b74807008dd54c59e20db393fe66e5e2b01b20a59ba4fc3f13ace7e880b76827c5315e99e32  40-hwcomposer.conf"
