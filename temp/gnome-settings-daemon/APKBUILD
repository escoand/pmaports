# Maintainer: William Pitcock <nenolod@dereferenced.org>
pkgname=gnome-settings-daemon
pkgver=3.28.1
pkgrel=0
pkgdesc="GNOME settings daemon"
url="http://www.gnome.org/"
arch="all !s390x"
license="GPL"
options="!check"
depends_dev="meson gnome-desktop-dev libnotify-dev
	libcanberra-dev colord-dev geoclue-dev
	libgweather-dev geocode-glib-dev
	pulseaudio-dev upower-dev libwacom-dev
	cups-dev networkmanager-dev nss-dev"
makedepends="$depends_dev libxml2-utils"
subpackages="$pkgname-dev $pkgname-lang"
source="https://download.gnome.org/sources/gnome-settings-daemon/${pkgver%.*}/gnome-settings-daemon-$pkgver.tar.xz
initial-keyboard.patch
notify-notification-close.patch"
builddir="$srcdir/gnome-settings-daemon-$pkgver"

build() {
	cd "$builddir"
	meson . _build --prefix=/usr -Dsystemd=false
	ninja -C _build
}

package() {
	cd "$builddir"
	DESTDIR="$pkgdir" ninja -C _build install
}

sha512sums="22e42ce92a6f3ad67a0ef7d1676a6dd3d533b0bc91193d8b2a19a51d7c9601c87caf391c233bb1b96e8a1270d610aca52523d0ae12a38b0e3911065c3a67e10f  gnome-settings-daemon-3.28.1.tar.xz
235986a8fdbaaebfb5a8d351532ea6621c4359bccd34f45f3addbe1b8ec051f6c52487b947a4db881441f8f8f484e5ddb26b4501ae34ee7444c73004526ab0b7  initial-keyboard.patch
d406ef54e15c919c8cbe18ec8f69716f72d2fd7a7c270ae15c169e6e1392d07650bea9e85a0f919b5e78417a19122ff4329d5f243a245042f10531147ab91367  notify-notification-close.patch"
