# Maintainer: William Pitcock <nenolod@dereferenced.org>
pkgname=gnome-settings-daemon
pkgver=3.28.0
pkgrel=0
pkgdesc="GNOME settings daemon"
url="http://www.gnome.org/"
arch="all !s390x"
license="GPL"
options="!check"
depends_dev="meson gnome-desktop-dev libnotify-dev
	libcanberra-dev colord-dev geoclue-dev
	libgweather-dev geocode-glib-dev
	pulseaudio-dev upower-dev libwacom-dev
	cups-dev networkmanager-dev nss-dev"
makedepends="$depends_dev libxml2-utils"
subpackages="$pkgname-dev $pkgname-lang"
source="https://download.gnome.org/sources/gnome-settings-daemon/${pkgver%.*}/gnome-settings-daemon-$pkgver.tar.xz
initial-keyboard.patch"
builddir="$srcdir/gnome-settings-daemon-$pkgver"

build() {
	cd "$builddir"
	meson . _build --prefix=/usr -Dsystemd=false
	ninja -C _build
}

package() {
	cd "$builddir"
	DESTDIR="$pkgdir" ninja -C _build install
}

sha512sums="4d1c69c382aa1452ccb3a1fe54e540ddd8f8f9782c5e4274f9dc01b9d4c0b4bd7a84340d6b5463347a93643e2e53aac6ea816f998f1d7b861966ef47429725b9  gnome-settings-daemon-3.28.0.tar.xz
235986a8fdbaaebfb5a8d351532ea6621c4359bccd34f45f3addbe1b8ec051f6c52487b947a4db881441f8f8f484e5ddb26b4501ae34ee7444c73004526ab0b7  initial-keyboard.patch"
